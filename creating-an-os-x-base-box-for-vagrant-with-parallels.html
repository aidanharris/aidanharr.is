<!DOCTYPE html>
<html lang="en">
<head>
          <title>Aidan Harris</title>
        <meta charset="utf-8" />
        <meta http-equiv="X-UA-Compatible" content="IE=edge" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0, minimum-scale=1.0" />
        <link rel="profile" href="http://gmpg.org/xfn/11" />
        <script async src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.0.0/jquery.min.js"></script>
        <link rel='stylesheet' href='https://code.getmdl.io/1.2.1/material.grey-blue.min.css'>
	    <script async src='https://cdnjs.cloudflare.com/ajax/libs/material-design-lite/1.2.1/material.min.js'></script>
        <link rel="stylesheet" id="aidanharris-material-design-style-css" href="/theme/css/style.css" type="text/css" media="all">
        <link rel="icon" href="https://i1.wp.com/aidanharr.is/wordpress/wp-content/uploads/2015/10/cropped-avatar1.png?fit=32%2C32&#038;ssl=1" sizes="32x32"/>
        <link rel="icon" href="https://i1.wp.com/aidanharr.is/wordpress/wp-content/uploads/2015/10/cropped-avatar1.png?fit=192%2C192&#038;ssl=1" sizes="192x192"/>
        <link rel="apple-touch-icon-precomposed" href="https://i1.wp.com/aidanharr.is/wordpress/wp-content/uploads/2015/10/cropped-avatar1.png?fit=180%2C180&#038;ssl=1"/>
        <meta name="msapplication-TileImage" content="https://i1.wp.com/aidanharr.is/wordpress/wp-content/uploads/2015/10/cropped-avatar1.png?fit=270%2C270&#038;ssl=1"/>
        <style type="text/css" id="themeBG">
        </style>
        <script>
            'use strict';
            (function() {
            var _darkTheme = false;
            try {
                _darkTheme = localStorage['darkTheme'];
                if (_darkTheme === undefined || _darkTheme === null) {
                    localStorage['darkTheme'] = _darkTheme; // Should throw if localStorage access is not possible
                }
                if (_darkTheme === 'true' || _darkTheme === true) {
                    _darkTheme = true;
                } else { _darkTheme = false; }
            } catch (err) {
                console.error(err);
                var _cookies = document.cookie.split('darkTheme=');
                if (_cookies.length > 1) {
                    if (_cookies[1] === 'true') {
                        _darkTheme = true;
                    } else {
                        _darkTheme = false;
                    }
                }
            }
            window.toggleDarkTheme = function toggleDarkTheme () {
                _darkTheme = !_darkTheme;
                switch (_darkTheme) {
                    case true:
                        if (document.body) {
                            document.body.classList.add('darkTheme');
                        }
                        document.getElementById('themeBG').innerHTML = "" +
                        "body { " +
                            "background: #424242 !important;" +
                        "}" +
                        "body.darkTheme .entry-content {" +
                            "background: #F2E9D2 !important;" +
                        "}" +
                        "body.darkTheme .mdl-card__supporting-text {" + 
                            "background: rgba(242, 233, 210, 0.7) !important;" +
                        "}" +
                        "body.darkTheme .mdl-card {" +
                            "background: #F2E9D2 !important;" +
                        "}" +
                        "body.darkTheme .mdl-card__media {" +
                            "background: #3D0E00" +
                        "}";
                        break;
                    case false:
                    default:
                        if (document.body) {
                            document.body.classList.remove('darkTheme');
                        }
                        document.getElementById('themeBG').innerHTML = "" +
                        "body { " +
                            "background: #fff !important;" +
                        "}";
                        break;
                }
                try {
                    localStorage['darkTheme'] = _darkTheme;
                } catch(err) {
                    console.error(err);
                    var _cookies = document.cookie;
                    if (_cookies.indexOf('darkTheme=') === -1) {
                        document.cookie = "darkTheme=" + _darkTheme;
                    } else {
                        document.cookie = document.cookie.replace(/darkTheme=.*;?/, 'darkTheme=' + _darkTheme);
                    }
                }
            }
            window.getCurrentTheme = function () {
                return (_darkTheme) ? 'dark' : 'light';
            }
            _darkTheme = !_darkTheme;
            return window.toggleDarkTheme();
            })();
        </script>
        <link href="https://aidanharr.is/feeds/all.atom.xml" type="application/atom+xml" rel="alternate" title="Aidan Harris Full Atom Feed" />
        <link href="https://aidanharr.is/feeds/apple-devops-os-x-parallels-vagrant-virtualisation.atom.xml" type="application/atom+xml" rel="alternate" title="Aidan Harris Categories Atom Feed" />




</head>

<body style="position: fixed; top: 0;">
    <script type="text/javascript">
        if (window.getCurrentTheme() === 'dark') {
            document.body.classList.add('darkTheme');
        }
    </script>
        <div class="mdl-layout mdl-js-layout mdl-layout--fixed-header">
            <header class="mdl-layout__header mdl-layout__header--waterfall portfolio-header">
                <div class="mdl-textfield mdl-js-textfield mdl-textfield--expandable mdl-textfield--floating-label mdl-textfield--align-right">
                        <form role="search" method="get" id="header-search" class="search-form" action="https://duckduckgo.com/" onsubmit="return (function(_this) { var searchTerm = _this.q.value; _this.q.value = ''; $('#header-search-button').click(); setTimeout(function(){Array.map(document.getElementsByTagName('header')[0].querySelectorAll('.is-dirty'), function(e){e.classList.remove('is-dirty');}); document.getElementById('q').blur(); window.location.href = 'https://duckduckgo.com/?q=' + encodeURIComponent('site: aidanharr.is ' + searchTerm);},500); return false; })(this);">
					<div class="mdl-textfield mdl-js-textfield mdl-textfield--expandable">
						<label class="mdl-button mdl-js-button mdl-button--icon" id="header-search-button" for="q" style="margin-left: -0.5em !important;" onclick="document.getElementById('q').style.borderColor = '#ccc';">
							<i class="material-icons">search</i>
						</label>
						<div class="mdl-textfield__expandable-holder">
							<input class="mdl-textfield__input" type="search" id="q" name="q" style="font-size: 14px;position: relative;right: 0.5em;background-color: transparent;border-color: transparent;" onfocus="this.style.borderColor = '#ccc';" onblur="setTimeout(function(){document.getElementById('q').style.borderColor = 'transparent';}, 325);" placeholder="Powered by DuckDuckGo&hellip;">
						</div>
					</div>
				</form>
			</div>
            <div class="mdl-layout__header-row portfolio-logo-row">
                <span class="mdl-layout__title">
                    <a href="/"><span class="portfolio-logo" style="display: block;background: url('data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiIHN0YW5kYWxvbmU9Im5vIj8+CjwhLS0gR2VuZXJhdG9yOiBBZG9iZSBJbGx1c3RyYXRvciAxOC4wLjAsIFNWRyBFeHBvcnQgUGx1Zy1JbiAuIFNWRyBWZXJzaW9uOiA2LjAwIEJ1aWxkIDApICAtLT4KCjxzdmcKICAgeG1sbnM6ZGM9Imh0dHA6Ly9wdXJsLm9yZy9kYy9lbGVtZW50cy8xLjEvIgogICB4bWxuczpjYz0iaHR0cDovL2NyZWF0aXZlY29tbW9ucy5vcmcvbnMjIgogICB4bWxuczpyZGY9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkvMDIvMjItcmRmLXN5bnRheC1ucyMiCiAgIHhtbG5zOnN2Zz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciCiAgIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIKICAgeG1sbnM6c29kaXBvZGk9Imh0dHA6Ly9zb2RpcG9kaS5zb3VyY2Vmb3JnZS5uZXQvRFREL3NvZGlwb2RpLTAuZHRkIgogICB4bWxuczppbmtzY2FwZT0iaHR0cDovL3d3dy5pbmtzY2FwZS5vcmcvbmFtZXNwYWNlcy9pbmtzY2FwZSIKICAgdmVyc2lvbj0iMS4xIgogICBpZD0iTGF5ZXJfMSIKICAgeD0iMHB4IgogICB5PSIwcHgiCiAgIHZpZXdCb3g9IjAgMCA0MjcuNTAzOTEgNDI2LjkwMzU5IgogICBlbmFibGUtYmFja2dyb3VuZD0ibmV3IDAgMCA2MTIgNzkyIgogICB4bWw6c3BhY2U9InByZXNlcnZlIgogICBpbmtzY2FwZTp2ZXJzaW9uPSIwLjkxIHIxMzcyNSIKICAgc29kaXBvZGk6ZG9jbmFtZT0iYXZhdGFyLnN2ZyIKICAgd2lkdGg9IjQyNy41MDM5MSIKICAgaGVpZ2h0PSI0MjYuOTAzNTkiPjxtZXRhZGF0YQogICAgIGlkPSJtZXRhZGF0YTE3Ij48cmRmOlJERj48Y2M6V29yawogICAgICAgICByZGY6YWJvdXQ9IiI+PGRjOmZvcm1hdD5pbWFnZS9zdmcreG1sPC9kYzpmb3JtYXQ+PGRjOnR5cGUKICAgICAgICAgICByZGY6cmVzb3VyY2U9Imh0dHA6Ly9wdXJsLm9yZy9kYy9kY21pdHlwZS9TdGlsbEltYWdlIiAvPjxkYzp0aXRsZSAvPjwvY2M6V29yaz48L3JkZjpSREY+PC9tZXRhZGF0YT48ZGVmcwogICAgIGlkPSJkZWZzMTUiIC8+PHNvZGlwb2RpOm5hbWVkdmlldwogICAgIHBhZ2Vjb2xvcj0iI2ZmZmZmZiIKICAgICBib3JkZXJjb2xvcj0iIzY2NjY2NiIKICAgICBib3JkZXJvcGFjaXR5PSIxIgogICAgIG9iamVjdHRvbGVyYW5jZT0iMTAiCiAgICAgZ3JpZHRvbGVyYW5jZT0iMTAiCiAgICAgZ3VpZGV0b2xlcmFuY2U9IjEwIgogICAgIGlua3NjYXBlOnBhZ2VvcGFjaXR5PSIwIgogICAgIGlua3NjYXBlOnBhZ2VzaGFkb3c9IjIiCiAgICAgaW5rc2NhcGU6d2luZG93LXdpZHRoPSIxODM4IgogICAgIGlua3NjYXBlOndpbmRvdy1oZWlnaHQ9Ijk1NCIKICAgICBpZD0ibmFtZWR2aWV3MTMiCiAgICAgc2hvd2dyaWQ9ImZhbHNlIgogICAgIGZpdC1tYXJnaW4tdG9wPSIwIgogICAgIGZpdC1tYXJnaW4tbGVmdD0iMCIKICAgICBmaXQtbWFyZ2luLXJpZ2h0PSIwIgogICAgIGZpdC1tYXJnaW4tYm90dG9tPSIwIgogICAgIGlua3NjYXBlOnpvb209IjEuMTkxOTE5MiIKICAgICBpbmtzY2FwZTpjeD0iMzk0LjkyOTA0IgogICAgIGlua3NjYXBlOmN5PSIyOTQuMTQ1MDkiCiAgICAgaW5rc2NhcGU6d2luZG93LXg9IjAiCiAgICAgaW5rc2NhcGU6d2luZG93LXk9IjI3IgogICAgIGlua3NjYXBlOndpbmRvdy1tYXhpbWl6ZWQ9IjEiCiAgICAgaW5rc2NhcGU6Y3VycmVudC1sYXllcj0iTGF5ZXJfMSIgLz48cGF0aAogICAgIGQ9Im0gLTk2LjM5NjA4Myw0NjQuNDAwNzIgYyAxOTguNjAwMDAzLDAgMzk3LjMwMDAwMywwIDU5NS45MDAwMDMsMCAxMi45LDAgMTIuOSwwIDEyLjksLTEyLjkgMCwtMTY3LjkgMCwtMzM1LjggMCwtNTAzLjU5OTk5NSAyLjksLTAuNiAxLjgsMS42IDEuOCwyLjggMCwxNzAuMjk5OTk1IDAsMzQwLjY5OTk5NSAwLjIsNTEwLjk5OTk5NSAwLDYuNSAtMy42LDQuNiAtNi42LDQuNiAtNjkuMiwwLjEgLTEzOC40LDAgLTIwNy42LDAgLTEyOS41LDAgLTI1OC45MDAwMDMsMCAtMzg4LjQwMDAwMywtMC4xIC0yLjYsLTAuMSAtNi4yLDIgLTguMiwtMS44IHoiCiAgICAgaWQ9InBhdGgzIgogICAgIGlua3NjYXBlOmNvbm5lY3Rvci1jdXJ2YXR1cmU9IjAiCiAgICAgc3R5bGU9ImZpbGw6I2ZlZmVmZSIgLz48cGF0aAogICAgIGQ9Im0gNDI3LjUwMzkyLDIxNC4yMDA3MiBjIC0yLjgsMTE5LjkgLTk1LjIsMjEzLjMgLTIxNSwyMTIuNyAtMTIwLjAwMDAwMywtMC42IC0yMTMuMjAwMDAyNzgsLTk0LjkgLTIxMi41MDAwMDI3OCwtMjE0LjcgQyAwLjcwMzkxNzIyLDkyLjYwMDcyNSA5NC41MDM5MTcsLTAuMjk5Mjc1NDcgMjE0LjAwMzkyLDcuMjQ1MjY0ZS00IDMzMy45MDM5MiwwLjMwMDcyNDUzIDQyNS41MDM5Miw5NC40MDA3MjUgNDI3LjUwMzkyLDIxNC4yMDA3MiBaIgogICAgIGlkPSJwYXRoNSIKICAgICBpbmtzY2FwZTpjb25uZWN0b3ItY3VydmF0dXJlPSIwIgogICAgIHN0eWxlPSJmaWxsOiNiMWIxYjEiIC8+PHBhdGgKICAgICBkPSJtIDMwNi4wMDM5MiwyMTMuMTAwNzIgYyAwLDE0LjcgMC4xLDI5LjUgLTAuMSw0NC4yIC0wLjEsMy43IDIuNCw5LjcgLTQuOSw5LjQgLTcuMiwtMC4yIC00LjQsLTYuMiAtNC41LC05LjkgLTAuNCwtMTAuMSAtMC42LC0yMC4zIDAsLTMwLjQgMC41LC04IC0yLjcsLTkuOSAtMTAsLTkuNiAtMTQuNCwwLjUgLTI4LjksMC41IC00My4zLDAgLTcsLTAuMiAtOS45LDEuNSAtOS41LDkuMSAwLjYsMTEuMyAwLjEsMjIuNyAwLjIsMzQuMSAwLDMuNSAwLjEsNi43IC01LDYuOSAtNS4zLDAuMSAtNiwtMi43IC02LC02LjkgMC4xLC0zMSAwLjEsLTYyIDAsLTkzIDAsLTMuOSAwLC03LjMgNS42LC03LjMgNS43LDAgNS40LDMuNiA1LjQsNy40IDAsMTAuNCAwLjIsMjAuOSAtMC4xLDMxLjMgLTAuMSw1LjIgMS4xLDcuOSA3LjEsNy44IDE2LjMsLTAuMyAzMi41LC0wLjIgNDguOCwwIDUuNCwwLjEgNi44LC0yLjMgNi43LC03LjIgLTAuMiwtMTAuNyAtMC4xLC0yMS41IC0wLjEsLTMyLjIgMCwtMy41IC0wLjIsLTcgNC45LC03IDUuMiwwLjEgNC43LDMuOCA0LjcsNy4xIDAuMSwxNS41IDAuMSwzMC44IDAuMSw0Ni4yIHoiCiAgICAgaWQ9InBhdGg3IgogICAgIGlua3NjYXBlOmNvbm5lY3Rvci1jdXJ2YXR1cmU9IjAiCiAgICAgc3R5bGU9ImZpbGw6I2ViZWJlYiIgLz48cGF0aAogICAgIGQ9Im0gMTY0LjcwMzkyLDE1OS45MDA3MiBjIDQuMiwtMC43IDUuOSwxLjYgNy4yLDUuMiAxMS42LDMxLjMgMjMuMyw2Mi42IDM0LjgsOTMuOSAwLjksMi4zIDQuNSw1LjkgLTAuMSw3LjUgLTMuNiwxLjMgLTguMSwxLjIgLTkuOSwtMy45IC0yLjQsLTYuOSAtNS4xLC0xMy44IC03LjIsLTIwLjggLTEuOCwtNS44IC00LjcsLTguNiAtMTEuMiwtOC4yIC05LjUsMC41IC0xOSwwLjUgLTI4LjUsMCAtNS42LC0wLjMgLTguMywxLjkgLTEwLDcgLTIuMiw3IC00LjksMTMuOSAtNy41LDIwLjcgLTEuMSwyLjkgLTIuMyw1LjYgLTYuMyw1LjYgLTQuNCwwIC03LjIsLTAuMiAtNSwtNiAxMi4xLC0zMi4xIDI0LC02NC4zIDM1LjksLTk2LjQgMS40LC0zLjggNCwtNS4yIDcuOCwtNC42IHoiCiAgICAgaWQ9InBhdGg5IgogICAgIGlua3NjYXBlOmNvbm5lY3Rvci1jdXJ2YXR1cmU9IjAiCiAgICAgc3R5bGU9ImZpbGw6I2ViZWJlYiIgLz48cGF0aAogICAgIGQ9Im0gMTY0LjMwMzkyLDE3My4wMDA3MiBjIDYuNCwxNy40IDExLjgsMzIuMSAxNy4xLDQ2LjkgMS4yLDMuMyAtMC41LDQuNSAtMy42LDQuNiAtOS4yLDAgLTE4LjMsMCAtMjcuNSwwLjEgLTMuNiwwLjEgLTQuMywtMS42IC0zLjIsLTQuNSA1LjQsLTE0LjkgMTAuOCwtMjkuNiAxNy4yLC00Ny4xIHoiCiAgICAgaWQ9InBhdGgxMSIKICAgICBpbmtzY2FwZTpjb25uZWN0b3ItY3VydmF0dXJlPSIwIgogICAgIHN0eWxlPSJmaWxsOiNiMWIxYjEiIC8+PC9zdmc+') 50% no-repeat;background-size: cover;  border: 0.175em solid #fff;border-radius: 100%;height: 150px;width: 150px;margin: auto auto 10px;"><span class="screen-reader-text">Aidan Harris</span></a>
                </span>
            </div>
            <div class="mdl-layout__header-row portfolio-navigation-row mdl-layout--large-screen-only">
            <nav id="menu" class="mdl-navigation mdl-typography--body-1-force-preferred-font">
                    <a href="#" class="mdl-navigation__link submenu-heading">Portfolio</a>
                        <nav class="mdl-navigation submenu" style="display: none;">
                            <a href="#" class="mdl-navigation__link">All</a>
                            <a href="#" class="mdl-navigation__link">Web Design</a>
                        </nav>
                        <a href="/contact" class="mdl-navigation__link">Contact</a>
                    <a href="#" class="mdl-navigation__link submenu-heading">Legal</a>
                        <nav class="mdl-navigation submenu" style="display: none;">
                            <a href="/copyright" class="mdl-navigation__link">Copyright</a>
                            <a href="/privacy" class="mdl-navigation__link">Privacy Policy</a>
                        </nav>
                        <a href="/glossary" class="mdl-navigation__link">Glossary</a>
            </nav><!-- /#menu -->
            </div>
            </header><!-- /#banner -->
            <div class="mdl-layout__drawer mdl-layout--small-screen-only" id="myTest" aria-hidden="true">
                <nav class="mdl-navigation mdl-typography--body-1-force-preferred-font">
                            <a href="#" class="mdl-navigation__link submenu-heading">Portfolio</a>
                                <nav class="mdl-navigation submenu" style="display: none;">
                                    <a href="#" class="mdl-navigation__link">All</a>
                                    <a href="#" class="mdl-navigation__link">Web Design</a>
                                </nav>
                                <a href="/contact" class="mdl-navigation__link">Contact</a>
                            <a href="#" class="mdl-navigation__link submenu-heading">Legal</a>
                                <nav class="mdl-navigation submenu" style="display: none;">
                                    <a href="/copyright" class="mdl-navigation__link">Copyright</a>
                                    <a href="/privacy" class="mdl-navigation__link">Privacy Policy</a>
                                </nav>
                                <a href="/glossary" class="mdl-navigation__link">Glossary</a>
                </nav>
            </div>
            <script defer>(function(){var attempts=0;var _int=setInterval(function(){if(typeof(window.jQuery==='function' && typeof(window.$)==='function')){clearInterval(_int);$(document).ready(function(){$(".submenu-heading").click(function(e){e.preventDefault();$(e.target.nextElementSibling).toggle('show');$(e.target).blur();});});}if(attempts>9){clearInterval(_int);console.error('No jQuery! To Do: Add it from a CDN here...');}attempts++;},100);}());</script>
            <main id="content" class="mdl-layout__content site-content">
<section id="content" class="body">
  <header>
    <h2 class="entry-title">
      <a href="https://aidanharr.is/creating-an-os-x-base-box-for-vagrant-with-parallels.html" rel="bookmark"
         title="Permalink to Creating an OS X Base Box for Vagrant with Parallels">Creating an OS X Base Box for Vagrant with Parallels</a></h2>
 
  </header>
  <footer class="post-info">
    <time class="published" datetime="2016-03-25T21:11:00+00:00">
      Fri 25 March 2016
    </time>
    <address class="vcard author">
      By           <a class="url fn" href="https://aidanharr.is/author/aidanharris.html">aidanharris</a>
    </address>
  </footer><!-- /.post-info -->
  <div class="entry-content">
    <div class="section" id="introduction">
<h2>Introduction</h2>
<p>Vagrant is a useful tool for managing virtual machines. It can be used
for setting up development and testing environments. This means code can
be built and tested in a clean and consistent environment.</p>
</div>
<div class="section" id="prerequisites">
<h2>Prerequisites</h2>
<ul class="simple">
<li>A Mac Computer - I'm using a MacBook Pro Retina 15&quot; Late 2013 model
running OS X El Capitan (10.11.4) but this tutorial is likely to work
for any version of OS X that is compatible with parallels and
vagrant.</li>
<li><a class="reference external" href="https://vagrantup.com">Vagrant</a></li>
<li><a class="reference external" href="https://www.parallels.com">Parallels</a></li>
<li><a class="reference external" href="https://github.com/Parallels/vagrant-parallels">vagrant-parallels</a>
(install it with vagrant;
<tt class="docutils literal">vagrant plugin install <span class="pre">vagrant-parallels</span></tt>)</li>
</ul>
</div>
<div class="section" id="step-1-creating-tuning-vm-configuration">
<h2>Step 1 - Creating &amp; Tuning VM Configuration</h2>
<figure><p><a class="reference external" href="https://aidanharr.is/wordpress/wp-content/uploads/2016/03/Install-OS-X-10.11.4.out_.png"><img alt="Screenshot of the Parallels Virtual Machine creation." class="alignnone size-medium wp-image-187" src="https://aidanharr.is/wordpress/wp-content/uploads/2016/03/Install-OS-X-10.11.4.out_-300x200.png" style="width: 50.0%;" /></a></p>
</figure><p>After selecting the &quot;Install OS X x.x.x Using the Recovery Partition&quot;
option, Parallels will immediately boot the VM. Shut it down so we can
make some adjustments to the VM.</p>
<p>Key things you might want to alter are the RAM, number of processors and
hard disk drive storage space. For my virtual machine I bumped the RAM
up to 4GB, changed the number of processors to 4 and changed the hard
disk size to 2TB. Most of these things can be altered later should you
need to.</p>
</div>
<div class="section" id="step-2-installing-os-x">
<h2>Step 2 - Installing OS X</h2>
<figure><p><a class="reference external" href="https://aidanharr.is/wordpress/wp-content/uploads/2016/03/InstallOSX.out_.png"><img alt="Screenshot taken from the OS X El Capitan installation." class="alignnone size-medium wp-image-208" src="https://aidanharr.is/wordpress/wp-content/uploads/2016/03/InstallOSX.out_-300x235.png" style="width: 50.0%;" /></a></p>
</figure><p>After altering the VM to your liking, proceed with the OS X installation
as you normally would ensuring that your username and password are both
set to 'vagrant'.</p>
</div>
<div class="section" id="step-3-installing-software-updates">
<h2>Step 3 - Installing Software Updates</h2>
<p>Install any software updates using
<tt class="docutils literal">sudo softwareupdate <span class="pre">--install</span> <span class="pre">--all</span></tt> or the AppStore.</p>
</div>
<div class="section" id="step-4-installing-parallels-tools">
<h2>Step 4 - Installing Parallels Tools</h2>
<p>Install Parallels Tools</p>
</div>
<div class="section" id="step-5-disabling-firewall">
<h2>Step 5 - Disabling Firewall</h2>
<p>Ensure that the firewall is disabled (go to &quot;System Preferences&quot; --&gt;
&quot;Security &amp; Privacy&quot; --&gt; &quot;Firewall&quot;)</p>
</div>
<div class="section" id="step-6-enabling-remote-login">
<h2>Step 6 - Enabling Remote Login</h2>
<p>Enable &quot;Remote Login&quot; (go to &quot;System Preferences&quot; --&gt; &quot;Sharing&quot; --&gt; Make
sure &quot;Remote Login&quot; is checked for all users)</p>
</div>
<div class="section" id="step-7-downloading-ssh-key-used-for-authentication">
<h2>Step 7 - Downloading SSH Key Used for Authentication</h2>
<p>Download the vagrant insecure ssh key which is used to obtain authorised
access to the box:</p>
<pre class="literal-block">
mkdir -p /Users/vagrant/.ssh
chmod 0700 /Users/vagrant/.ssh
curl -o /Users/vagrant/.ssh/authorized_keys --url https://raw.githubusercontent.com/mitchellh/vagrant/master/keys/vagrant.pub
chmod 0600 /Users/vagrant/.ssh/authorized_keys
chown -R vagrant /Users/vagrant/.ssh
</pre>
</div>
<div class="section" id="step-8-setting-up-password-less-sudo-access">
<h2>Step 8 - Setting up password-less `sudo` access</h2>
<p>Set up password-less `sudo` access:</p>
<p><tt class="docutils literal">sudo visudo</tt></p>
<p>Add or modify the following lines as necessary:</p>
<pre class="literal-block">
Defaults env_keep += 'SSH_AUTH_SOCK'
Defaults:vagrant !requiretty

# Add the vagrant user at the end of the file
vagrant ALL=NOPASSWD:ALL
</pre>
</div>
<div class="section" id="step-9-installing-software-necessary-for-provisioning">
<h2>Step 9 - Installing Software Necessary for Provisioning</h2>
<p>Install the bare minimum needed to provision a VM e.g.
<a class="reference external" href="https://developer.apple.com/xcode/">Xcode</a>,
<a class="reference external" href="http://brew.sh">Homebrew</a> and <a class="reference external" href="https://www.chef.io/">Chef</a>.</p>
</div>
<div class="section" id="step-10-optimising-the-vm">
<h2>Step 10 - Optimising the VM</h2>
<p>You can zero out free space using <tt class="docutils literal">diskutil</tt> as follows:</p>
<pre class="literal-block">
diskutil secureErase freespace 0 Macintosh HD
</pre>
<p>Doing the above produced some errors but YMMV.</p>
<p>After the above is done you can power off the VM (<tt class="docutils literal">sudo halt</tt>) and
compress the HDD using Parallels as follows:</p>
<pre class="literal-block">
prl_disk_tool compact --hdd /path/to/harddisk.hdd
</pre>
</div>
<div class="section" id="step-11-packaging-the-vm">
<h2>Step 11 - Packaging the VM</h2>
<div class="section" id="create-metadata-json-file-inside-parallels-pvm-file-this-is-probably-in-documents-parallels">
<h3>Create metadata.json file inside parallels .pvm file (this is probably in ~/Documents/Parallels/):</h3>
<p>The metadata.json file should look as follows:</p>
<pre class="literal-block">
{&quot;provider&quot;: &quot;parallels&quot;}
</pre>
<p>After you've done the above you can then package the box using the
following command:</p>
<pre class="literal-block">
tar cvzf elcapitan64.box ./OS\ X\ 10.11.4.pvm ./metadata.json
</pre>
<p>After this is done you can instruct Vagrant to add as an available box
as follows:</p>
<pre class="literal-block">
vagrant box add elcapitan64 elcapitan64.box
</pre>
<p>In a new directory you can then run <tt class="docutils literal">vagrant init elcapitan64</tt> and
bring the machine up with <tt class="docutils literal">vagrant up</tt></p>
<p>If Vagrant has issues authenticating with the box over SSH refer to the
following <a class="reference external" href="http://stackoverflow.com/questions/22922891/vagrant-ssh-authentication-failure">StackOverflow
question</a>.</p>
</div>
</div>
<div class="section" id="acknowledgment">
<h2>Acknowledgment</h2>
<p>A special thanks goes to <a class="reference external" href="https://www.skoblenick.com/vagrant/vmware-fusion/creating-an-osx-base-box/">Ryan
Skoblenick</a>
who greatly influenced this tutorial.</p>
<p>Parallels also provides some helpful information on creating base boxes
<a class="reference external" href="http://parallels.github.io/vagrant-parallels/docs/boxes/base.html">here</a>.</p>
</div>
<div class="section" id="automation">
<h2>Automation</h2>
<p>It should be possible to automate a lot of the above (perhaps by using
<a class="reference external" href="https://www.packer.io">Packer</a>?), something I'll be investigating
further in the future.</p>
</div>

  </div><!-- /.entry-content -->
</section>
            <footer id="contentinfo" class="mdl-mini-footer">
                <div class="mdl-mini-footer__left-section">
                    <ul class="mdl-mini-footer__link-list">
                        <li><a href="/copyright" style="color: #9e9e9e;text-decoration: none;"><strike>©</strike> <strike>Copyright</strike> 2016 ‐ Aidan Harris</a></li>
                        <li><a href="/privacy" style="color: #9e9e9e;text-decoration: none;">Privacy &amp; Terms</a></li>
                    </ul>
                    <label class="mdl-switch mdl-js-switch mdl-js-ripple-effect" for="themeSelector">
                        <input type="checkbox" id="themeSelector" class="mdl-switch__input">
                        <span class="mdl-switch__label" id="themeSelectorLabel"></span>
                    </label>

                    <script type="text/javascript">
                        (function() { 
                            var setCurrentTheme = function() {
                                document.getElementById('themeSelectorLabel').innerHTML = getCurrentTheme().charAt(0).toUpperCase() + getCurrentTheme().slice(1) + ' Theme';
                            }
                            document.getElementById('themeSelector').checked = (window.getCurrentTheme() === 'dark');
                            document.getElementById('themeSelector').onchange = function() {
                                window.window.toggleDarkTheme();
                                setCurrentTheme();
                            };
                            return setCurrentTheme();
                        })();
                    </script>
                </div>
                <div class="mdl-mini-footer__right-section">
                    <div class="mdl-logo" style="color: #9e9e9e;text-decoration: none;">
                        Proudly powered by <a href="http://getpelican.com/" style="color: #9e9e9e;text-decoration: none;">Pelican</a>,
                        which takes great advantage of <a href="http://python.org" style="color: #9e9e9e;text-decoration: none;">Python</a>.
                    </div>
                </div>
            </footer><!-- /#contentinfo -->
            </main>
        </div>
        <link rel='stylesheet' href='https://fonts.googleapis.com/css?family=Roboto:regular,bold,italic,thin,light,bolditalic,black,medium&lang=en'/>
        <link rel='stylesheet' href='https://fonts.googleapis.com/icon?family=Material+Icons'/>
        <link rel='stylesheet' href='/theme/css/devicons.min.css'/>
        <link rel='stylesheet' href='//cdnjs.cloudflare.com/ajax/libs/font-awesome/4.6.3/css/font-awesome.min.css'/>
        <script>
        (function() {
            var _MaterialLayout = setInterval(function() {
            if (!window.MaterialLayout) { return; }
            clearTimeout(_MaterialLayout);
            // Monkey Patch MaterialLayout headerClickHandler
            MaterialLayout.prototype.headerClickHandler_ = function(e) {
                if((e.target.id !== 'q' && e.target.parentNode.id !== 'header-search-button') && e.target.textContent !== '') {
                    if (this.header_.classList.contains(this.CssClasses_.IS_COMPACT)) {
                        this.header_.classList.remove(this.CssClasses_.IS_COMPACT);
                        this.header_.classList.add(this.CssClasses_.IS_ANIMATING);
                    }
                }
            };
            }, 50);
        })();
        </script>
</body>
</html>